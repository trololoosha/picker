class Picker{constructor(e=".picker"){this.parent=e,this.correctNextMonth=this.correctNextMonth.bind(this),this.correctPrevMonth=this.correctPrevMonth.bind(this),this.maxDays=this.daysInMonths(),this.prevDays=this.prevEmptyDays(),this.restDays=this.restEmptyDays()}_state={dayNames:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthsNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],month:(new Date).getMonth(),year:(new Date).getFullYear(),date:new Date};prevEmptyDays(){let e=new Date(this.state.year,this.state.month,1).getDay();return 0===e&&(e=7),e-1}restEmptyDays(){return 7-new Date(this.state.year,this.state.month,this.daysInMonths()).getDay()}daysInMonths(){return 32-new Date(this.state.year,this.state.month,32).getDate()}setYear(){document.querySelector(".picker__year").innerHTML=this.state.year}setMonth(){document.querySelector(".picker__currentMonth").innerHTML=this.state.monthsNames[this.state.month]}correctPrevMonth(){let e=this.state.year,t=--this.state.month;t<0&&(t=11,--e,document.querySelector(".picker__year").innerHTML="",this.correctYear=e,this.setYear()),this.correctMonth=t,document.querySelector(".picker__currentMonth").innerHTML="",document.querySelector(".picker__days_container").innerHTML="",this.createPickerDays(),this.setMonth()}correctNextMonth(){let e=this.state.year,t=++this.state.month;t>11&&(t=0,++e,document.querySelector(".picker__year").innerHTML="",this.correctYear=e,this.setYear()),this.correctMonth=t,document.querySelector(".picker__currentMonth").innerHTML="",document.querySelector(".picker__days_container").innerHTML="",this.createPickerDays(),this.setMonth()}createPickerDays(){const e=document.querySelector(".picker__days_container"),t=32-new Date(this.state.year,this.state.month-1,32).getDate(),r=this.prevEmptyDays(),a=this.restEmptyDays(),s=this.daysInMonths();let n=0,c=1,i=1;for(;n<r;){const r=document.createElement("div"),a=document.createElement("span");r.classList.add("picker__empty","picker__day"),a.innerHTML=t-n,r.appendChild(a),e.prepend(r),n++}for(;i<=s;){const t=document.createElement("div"),r=document.createElement("span"),a=this.state.date.getDate(),s=this.state.month,n=(new Date).getMonth(),c=this.state.year,o=(new Date).getFullYear();if(i===a&&s===n&&c===o){const e=document.createElement("span");e.innerHTML="Сегодня",e.classList.add("span_current"),t.prepend(e),t.classList.add("p_current")}t.classList.add("picker__day"),r.innerHTML=i,t.appendChild(r),e.appendChild(t),i++}for(;c<=a;){const t=document.createElement("div"),r=document.createElement("span");t.classList.add("picker__empty","picker__day"),r.innerHTML=c,t.appendChild(r),e.appendChild(t),c++}}get state(){return this._state}set correctYear(e){this._state.year=e}set correctMonth(e){this._state.month=e}createMarkup(){let e=document.querySelector(this.parent),t=document.createElement("div");t.classList.add("picker__year"),e.prepend(t);let r=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div");r.classList.add("picker__month"),a.classList.add("picker__left_arrow"),n.classList.add("picker__currentMonth"),s.classList.add("picker__right_arrow"),r.appendChild(a),r.appendChild(n),r.appendChild(s),e.appendChild(r);let c=document.createElement("div");c.classList.add("picker__dayNames_container"),this.state.dayNames.forEach(e=>{let t=document.createElement("div");t.classList.add("picker__dayName"),t.innerHTML=e,c.appendChild(t)}),e.appendChild(c);let i=document.createElement("div");i.classList.add("picker__days_container"),e.appendChild(i)}createListeners(){document.querySelector(".picker__left_arrow").onclick=this.correctPrevMonth,document.querySelector(".picker__right_arrow").onclick=this.correctNextMonth}create(){this.createMarkup(),this.setYear(),this.setMonth(),this.createPickerDays(),this.createListeners()}}const calendar=new Picker(".picker");calendar.create();